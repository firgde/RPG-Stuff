# slot番目のスロットにストレージのindex番目のモブデータを入れる
    $execute if predicate {"condition":"value_check","value":{"type":"storage","storage":"book:","path":"data.combat.mob[$(index)].discovered"},"range":1} if data storage book: data.combat.mob[$(index)] run loot replace entity @s container.$(slot) loot {"pools":[{"rolls":1,"entries":[{"type":"item","name":"stick","functions":[{"function":"set_name","entity":"this","target":"item_name","name":{"nbt":"data.combat.mob[$(index)].name","storage":"book:","interpret":true}},{"function":"set_lore","entity":"this","lore":[{"nbt":"data.combat.mob[$(index)].description","storage":"book:","interpret":true}],"mode":"append"},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.atk","with":[{"nbt":"data.combat.mob[$(index)].stats.atk","storage":"book:","color":"dark_green","italic":false}],"color":"white","italic":false}],"mode":"append","conditions":[{"condition":"value_check","value":{"type":"storage","storage":"book:","path":"data.combat.mob[$(index)].stats.atk"},"range":{"min":1}}]},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.mag","with":[{"nbt":"data.combat.mob[$(index)].stats.mag","storage":"book:","color":"dark_green","italic":false}],"color":"white","italic":false}],"mode":"append","conditions":[{"condition":"value_check","value":{"type":"storage","storage":"book:","path":"data.combat.mob[$(index)].stats.mag"},"range":{"min":1}}]},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.dex","with":[{"nbt":"data.combat.mob[$(index)].stats.dex","storage":"book:","color":"dark_green","italic":false}],"color":"white","italic":false}],"mode":"append","conditions":[{"condition":"value_check","value":{"type":"storage","storage":"book:","path":"data.combat.mob[$(index)].stats.dex"},"range":{"min":1}}]},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.spd","with":[{"nbt":"data.combat.mob[$(index)].stats.spd","storage":"book:","color":"dark_green","italic":false}],"color":"white","italic":false}],"mode":"append","conditions":[{"condition":"value_check","value":{"type":"storage","storage":"book:","path":"data.combat.mob[$(index)].stats.spd"},"range":{"min":1}}]},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.hp","with":[{"nbt":"data.combat.mob[$(index)].stats.hp","storage":"book:","color":"dark_green","italic":false}],"color":"white","italic":false}],"mode":"append","conditions":[{"condition":"value_check","value":{"type":"storage","storage":"book:","path":"data.combat.mob[$(index)].stats.hp"},"range":{"min":1}}]},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.def","with":[{"nbt":"data.combat.mob[$(index)].stats.def","storage":"book:","color":"dark_green","italic":false}],"color":"white","italic":false}],"mode":"append","conditions":[{"condition":"value_check","value":{"type":"storage","storage":"book:","path":"data.combat.mob[$(index)].stats.def"},"range":{"min":1}}]},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.resistance.melee","with":[{"nbt":"data.combat.mob[$(index)].resistance.melee","storage":"book:","color":"white","font":"asset:resistance/melee","italic":false}],"color":"gray","italic":false}],"mode":"append"},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.resistance.magic","with":[{"nbt":"data.combat.mob[$(index)].resistance.magic","storage":"book:","color":"white","font":"asset:resistance/magic","italic":false}],"color":"gray","italic":false}],"mode":"append"},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.resistance.ranged","with":[{"nbt":"data.combat.mob[$(index)].resistance.magic","storage":"book:","color":"white","font":"asset:resistance/ranged","italic":false}],"color":"gray","italic":false}],"mode":"append"},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.resistance.fire","with":[{"nbt":"data.combat.mob[$(index)].resistance.fire","storage":"book:","color":"white","font":"asset:resistance/fire","italic":false}],"color":"gray","italic":false}],"mode":"append"},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.resistance.ice","with":[{"nbt":"data.combat.mob[$(index)].resistance.ice","storage":"book:","color":"white","font":"asset:resistance/ice","italic":false}],"color":"gray","italic":false}],"mode":"append"},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.resistance.wind","with":[{"nbt":"data.combat.mob[$(index)].resistance.wind","storage":"book:","color":"white","font":"asset:resistance/wind","italic":false}],"color":"gray","italic":false}],"mode":"append"},{"function":"set_lore","entity":"this","lore":[{"translate":"social.ui.knowledge_book.status.combat.mob.resistance.thunder","with":[{"nbt":"data.combat.mob[$(index)].resistance.thunder","storage":"book:","color":"white","font":"asset:resistance/thunder","italic":false}],"color":"gray","italic":false}],"mode":"append"}]}],"functions":[{"function":"set_custom_data","tag":"{ui:1b,menu:\"knowledge_book\"}"}],"conditions":[{"condition":"value_check","value":{"type":"storage","storage":"book:","path":"data.combat.mob[$(index)]"},"range":{}}]}]}
# 発見済みならアイコン、そうでないなら空きスロット配置
    $execute if predicate {"condition":"value_check","value":{"type":"storage","storage":"book:","path":"data.combat.mob[$(index)].discovered"},"range":1} run item modify entity @s container.$(slot) [{"function":"set_custom_model_data","floats":{"values":[{"type":"storage","storage":"book:","path":"data.combat.mob[$(index)].custom_model_data"}],"mode":"replace_all"}}]
    $execute if predicate {"condition":"value_check","value":{"type":"storage","storage":"book:","path":"data.combat.mob[$(index)].discovered"},"range":0} run loot replace entity @s container.$(slot) loot {"pools":[{"rolls":1,"entries":[{"type":"item","name":"stick","functions":[{"function":"set_name","entity":"this","target":"item_name","name":{"translate":"social.ui.knowledge_book.status.combat.mob.undiscovered","color":"gray","italic":true}},{"function":"set_custom_data","tag":"{ui:1b,menu:\"knowledge_book\"}"},{"function":"set_custom_model_data","floats":{"values":[49999],"mode":"append"}}]}]}]}
# そもそもモブが存在しないなら空
    $execute unless data storage book: data.combat.mob[$(index)] run item replace entity @s container.$(slot) with stick[item_model="air",custom_data={ui:1b,menu:"knowledge_book"},tooltip_display={hide_tooltip:true}]
